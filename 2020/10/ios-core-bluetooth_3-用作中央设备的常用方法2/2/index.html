<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="iOS Core Bluetooth_3 ç”¨ä½œä¸­å¤®è®¾å¤‡çš„å¸¸ç”¨æ–¹æ³•ï¼ˆ2/2ï¼‰" />
<meta property="og:description" content="å†™åœ¨å‰é¢

åœ¨ä¸Šä¸€èŠ‚ä¸­ä¸»è¦ä»‹ç»äº†CoreBluetoothä¸­ä¸­å¤®è®¾å¤‡çš„å®ä¾‹åŒ–ã€æ‰«æä¸è¿æ¥ã€‚è¿™ä¸€èŠ‚ç»§ç»­ä»‹ç»ï¼Œåœ¨è¿æ¥è®¾å¤‡åçš„æŸ¥è¯¢æœåŠ¡ä¸ç‰¹å¾å­—æ®µï¼Œè¯»å–ã€å†™å…¥ã€è®¢é˜…ç­‰æ“ä½œã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhangchengmin99.github.io/2020/10/ios-core-bluetooth_3-%E7%94%A8%E4%BD%9C%E4%B8%AD%E5%A4%AE%E8%AE%BE%E5%A4%87%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%952/2/" />
<meta property="article:published_time" content="2020-10-07T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-10-07T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="iOS Core Bluetooth_3 ç”¨ä½œä¸­å¤®è®¾å¤‡çš„å¸¸ç”¨æ–¹æ³•ï¼ˆ2/2ï¼‰"/>
<meta name="twitter:description" content="å†™åœ¨å‰é¢

åœ¨ä¸Šä¸€èŠ‚ä¸­ä¸»è¦ä»‹ç»äº†CoreBluetoothä¸­ä¸­å¤®è®¾å¤‡çš„å®ä¾‹åŒ–ã€æ‰«æä¸è¿æ¥ã€‚è¿™ä¸€èŠ‚ç»§ç»­ä»‹ç»ï¼Œåœ¨è¿æ¥è®¾å¤‡åçš„æŸ¥è¯¢æœåŠ¡ä¸ç‰¹å¾å­—æ®µï¼Œè¯»å–ã€å†™å…¥ã€è®¢é˜…ç­‰æ“ä½œã€‚"/>



    <link rel="canonical" href="https://zhangchengmin99.github.io/2020/10/ios-core-bluetooth_3-%E7%94%A8%E4%BD%9C%E4%B8%AD%E5%A4%AE%E8%AE%BE%E5%A4%87%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%952/2/">

    <title>
      
        iOS Core Bluetooth_3 ç”¨ä½œä¸­å¤®è®¾å¤‡çš„å¸¸ç”¨æ–¹æ³•ï¼ˆ2/2ï¼‰ | cmHubs
      
    </title>

    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href="https://zhangchengmin99.github.io/css/style.css" rel="stylesheet">

    

    

    
  </head>
  <body>
    
      

<header class="blog-header">
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        <a class="navbar-brand" href="/">
            <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g75u7zx3o0j30tf0tf0u0.jpg" width="30" height="30" class="d-inline-block align-top"
    alt="">
cmHubs
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-between" id="navbarNav">
            <ul class="navbar-nav">
                
                
                <li class="nav-item ">
                    
                        <a class="nav-link" href="/post/">Home</a>
                    
                </li>
                
                <li class="nav-item ">
                    
                        <a class="nav-link" href="/about/">About</a>
                    
                </li>
                
                <li class="nav-item ">
                    
                        <a class="nav-link" href="/contact/">Contact</a>
                    
                </li>
                
            </ul>
            
        </div>
    </nav>
</header>

    

    
    <div class="container">
      <div class="row">
        <div class="col-12 col-lg-8 blog-main">

          

<header>
    <h2 class="blog-post-title">
    <a class="text-dark" href="/2020/10/ios-core-bluetooth_3-%E7%94%A8%E4%BD%9C%E4%B8%AD%E5%A4%AE%E8%AE%BE%E5%A4%87%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%952/2/">iOS Core Bluetooth_3 ç”¨ä½œä¸­å¤®è®¾å¤‡çš„å¸¸ç”¨æ–¹æ³•ï¼ˆ2/2ï¼‰</a>
</h2>

    


<div class="blog-post-date text-secondary">
    
        <time datetime="2020-10-07">Oct 7, 2020</time>
    
    
        by <span rel="author">Chengmin</span>
    
</div>

    
<div class="blog-post-tags text-secondary">
    <strong>Tags:</strong>
    
        <a class="badge badge-primary" href="/tags/ios">iOS</a>
    
        <a class="badge badge-primary" href="/tags/bluetooth">bluetooth</a>
    
</div>

    
<div class="blog-post-categories text-secondary">
    <strong>Categories:</strong>
    
        <a class="badge badge-primary" href="/categories/development">DevelopmentğŸ‘¨ğŸ»â€ğŸ’»</a>
    
</div>

    <hr>
</header>
<article class="blog-post">
    <h4 id="å†™åœ¨å‰é¢">å†™åœ¨å‰é¢</h4>

<p>åœ¨ä¸Šä¸€èŠ‚ä¸­ä¸»è¦ä»‹ç»äº†CoreBluetoothä¸­ä¸­å¤®è®¾å¤‡çš„å®ä¾‹åŒ–ã€æ‰«æä¸è¿æ¥ã€‚è¿™ä¸€èŠ‚ç»§ç»­ä»‹ç»ï¼Œåœ¨è¿æ¥è®¾å¤‡åçš„æŸ¥è¯¢æœåŠ¡ä¸ç‰¹å¾å­—æ®µï¼Œè¯»å–ã€å†™å…¥ã€è®¢é˜…ç­‰æ“ä½œã€‚</p>

<ul>
<li>å®ä¾‹åŒ–ä¸­å¤®ç®¡ç†å™¨å¯¹è±¡</li>
<li>å‘ç°å¹¶è¿æ¥åˆ°æ­£åœ¨å¹¿æ’­çš„å¤–å›´è®¾å¤‡</li>
<li>åœ¨è¿æ¥åˆ°å¤–å›´è®¾å¤‡åæµè§ˆå…¶æ•°æ®</li>
<li>å‘é€è¯»å†™è¯·æ±‚åˆ°å¤–å›´æœåŠ¡çš„ç‰¹å¾å€¼</li>
<li>è®¢é˜…ç‰¹å¾å€¼ä»¥åœ¨æ›´æ–°æ—¶è¢«é€šçŸ¥</li>
</ul>

<p>åœ¨æœ¬æ–‡ä¸­æ‰¾åˆ°çš„ä»£ç ç¤ºä¾‹æ˜¯ç®€å•æŠ½è±¡çš„ã€‚æ‚¨å¯èƒ½éœ€è¦è¿›è¡Œé€‚å½“çš„æ›´æ”¹ä»¥å°†å…¶åˆå¹¶åˆ°æ‚¨çš„çœŸå®åº”ç”¨ä¸­ã€‚</p>

<h4 id="1-å‘ç°æ‚¨æ‰€è¿æ¥çš„å¤–å›´è®¾å¤‡çš„æœåŠ¡">1 å‘ç°æ‚¨æ‰€è¿æ¥çš„å¤–å›´è®¾å¤‡çš„æœåŠ¡</h4>

<p>å»ºç«‹ä¸å¤–å›´è®¾å¤‡çš„è¿æ¥åï¼Œæ‚¨å¯ä»¥æµè§ˆå…¶æ•°æ®ã€‚ä¸å¤–å›´è®¾å¤‡è¿›è¡Œæ•°æ®äº¤äº’çš„ç¬¬ä¸€æ­¥æ˜¯å‘ç°å…¶å¯ç”¨çš„æœåŠ¡ã€‚ç”±äºå¤–å›´è®¾å¤‡å¯ä»¥å¹¿æ’­çš„æ•°æ®é‡å—åˆ°å¤§å°é™åˆ¶ï¼Œå› æ­¤æ‚¨å¯èƒ½ä¼šå‘ç°å¤–å›´è®¾å¤‡æä¾›çš„æœåŠ¡å¤šäºå…¶å¹¿æ’­çš„å†…å®¹ï¼ˆåœ¨å…¶å¹¿æ’­åŒ…ä¸­ï¼‰ã€‚æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨ï¼ˆè¿›è¡Œè¿æ¥åçš„ï¼‰å¤–å›´è®¾å¤‡çš„discoverServices:æ–¹æ³•æ¥å‘ç°å¤–å›´è®¾å¤‡æä¾›çš„æ‰€æœ‰æœåŠ¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<pre><code class="language-swift">peripheral.discoverServices([TransferService.serviceUUID])
</code></pre>

<blockquote>
<p>æ³¨æ„ï¼š åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸ä¸ä¼ å…¥nilå‚æ•°ï¼Œå› ä¸ºè¿™æ ·åšä¼šè¿”å›å¤–å›´è®¾å¤‡ä¸Šæ‰€æœ‰å¯ç”¨çš„æœåŠ¡ã€‚ç”±äºå¤–å›´è®¾å¤‡å¯èƒ½åŒ…å«æ¯”æ‚¨æ‰€éœ€è¦çš„æ›´å¤šçš„æœåŠ¡ï¼Œå› æ­¤å‘ç°æ‰€æœ‰è¿™äº›å¤–å›´è®¾å¤‡å¯èƒ½ä¼šæµªè´¹ç”µæ± å¯¿å‘½å¹¶ä¸å¿…è¦çš„æµªè´¹æ—¶é—´ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œé€šå¸¸æŒ‡å®šæ‚¨å·²ç»çŸ¥é“æœ‰å…´è¶£å‘ç°çš„æœåŠ¡çš„UUIDï¼Œå¦‚æœ¬ä¾‹ä¸­ï¼š[TransferService.serviceUUID]</p>
</blockquote>

<p>å‘ç°æŒ‡å®šçš„æœåŠ¡åï¼Œå¤–å›´è®¾å¤‡ï¼ˆCBPeripheralæ‚¨è¿æ¥åˆ°çš„å¯¹è±¡ï¼‰å°†è°ƒç”¨peripheral:didDiscoverServices:å…¶ä»£ç†æ–¹æ³•ã€‚æ ¸å¿ƒè“ç‰™åˆ›å»ºä¸€ä¸ªCBServiceå¯¹è±¡æ•°ç»„ä¿å­˜æ¯ä¸ªåœ¨å¤–å›´è®¾å¤‡ä¸Šå‘ç°çš„æœåŠ¡å¹¶éå†æŒ‡å®šå­—æ®µã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œæ‚¨å¯ä»¥å®ç°æ­¤ä»£ç†æ–¹æ³•æ¥è®¿é—®å‘ç°çš„æœåŠ¡æ•°ç»„ï¼ˆé€šå¸¸é€šè¿‡extensionå®ç°ï¼‰ï¼š</p>

<pre><code class="language-swift">func peripheral(_ peripheral: CBPeripheral, didDiscoverServices error: Error?) {
      if let error = error {
        os_log(&quot;Error discovering services: %s&quot;, error.localizedDescription)
        cleanup()
        return
      }
      // Discover the characteristic we want...
      // Loop through the newly filled peripheral.services array, just in case there's more than one.
      guard let peripheralServices = peripheral.services else { return }
      for service in peripheralServices {
        peripheral.discoverCharacteristics([TransferService.characteristicUUID], for: service)
      }
}
</code></pre>

<h4 id="2-å‘ç°æœåŠ¡çš„ç‰¹å¾å­—æ®µ">2 å‘ç°æœåŠ¡çš„ç‰¹å¾å­—æ®µ</h4>

<p>å½“æ‚¨æ‰¾åˆ°è‡ªå·±æ„Ÿå…´è¶£çš„æœåŠ¡æ—¶ï¼Œæ¢ç´¢å¤–å›´è®¾å¤‡å¿…é¡»æä¾›çš„ä¸‹ä¸€æ­¥å°±æ˜¯å‘ç°è¯¥æœåŠ¡çš„æ‰€æœ‰ç‰¹å¾ã€‚å‘ç°æœåŠ¡çš„æ‰€æœ‰ç‰¹å¾å°±åƒå‘ç°å¤–å›´è®¾å¤‡çš„æ‰€æœ‰æœåŠ¡æˆ–æŒ‡å®šå‘ç°æŸä¸€ç§æœåŠ¡ä¸€æ ·ç®€å•ï¼Œé€šè¿‡è°ƒç”¨discoverCharacteristics:forService:æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šï¼ˆä¸‹æ–‡ä¸­è®¢é˜…äº†æŒ‡å®šçš„å­—æ®µï¼‰</p>

<pre><code class="language-swift">func peripheral(_ peripheral: CBPeripheral, didDiscoverCharacteristicsFor service: CBService, error: Error?) {
        // Deal with errors (if any).
        if let error = error {
            os_log(&quot;Error discovering characteristics: %s&quot;, error.localizedDescription)
            cleanup()
            return
        }
        // Again, we loop through the array, just in case and check if it's the right one
        guard let serviceCharacteristics = service.characteristics else { return }
        for characteristic in serviceCharacteristics where characteristic.uuid == TransferService.characteristicUUID {
            // If it is, subscribe to it
            transferCharacteristic = characteristic
            peripheral.setNotifyValue(true, for: characteristic)
        }
        // Once this is complete, we just need to wait for the data to come in.
    }
</code></pre>

<h4 id="3-æ£€ç´¢ç‰¹å¾å€¼-è¯»å–å’Œè®¢é˜…">3 æ£€ç´¢ç‰¹å¾å€¼ï¼ˆè¯»å–å’Œè®¢é˜…ï¼‰</h4>

<p>ç‰¹å¾åŒ…å«å•ä¸ªå€¼ï¼Œè¯¥å€¼è¡¨ç¤ºæœ‰å…³å¤–å›´è®¾å¤‡æœåŠ¡çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå¥åº·æ¸©åº¦è®¡æœåŠ¡çš„æ¸©åº¦æµ‹é‡ç‰¹æ€§å¯ä»¥å…·æœ‰æŒ‡ç¤ºæ‘„æ°æ¸©åº¦çš„å€¼ã€‚æ‚¨å¯ä»¥é€šè¿‡ç›´æ¥é˜…è¯»æˆ–è®¢é˜…æ¥æ£€ç´¢ç‰¹å¾çš„å€¼ã€‚</p>

<p>######## 3-1 è¯»å–ç‰¹å¾å€¼
æ‰¾åˆ°æ„Ÿå…´è¶£çš„æœåŠ¡çš„ç‰¹å¾åï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨å¤–å›´è®¾å¤‡çš„readValue(for characteristic: CBCharacteristic)æˆ–readValue(for descriptor: CBDescriptor)æ–¹æ³•å¹¶æŒ‡å®šé€‚å½“çš„ç‰¹å¾æ¥è¯»å–ç‰¹å¾çš„å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<pre><code class="language-swift">peripheral.readValue(for characteristic: CBCharacteristic)
</code></pre>

<p>å½“æ‚¨è°ƒç”¨æ­¤æ–¹æ³•ä»¥è¯»å–ç‰¹å¾å€¼æ—¶ï¼Œå¤–å›´è®¾å¤‡å°†è°ƒç”¨å…¶å§”æ‰˜å¯¹è±¡çš„æ–¹æ³•ã€‚å¦‚æœå¤–è®¾æˆåŠŸè¯»å–ç‰¹å¾å€¼ï¼Œåˆ™å¯ä»¥é€šè¿‡ç‰¹å¾çš„å±æ€§å¯¹å…¶è¿›è¡Œè®¿é—®ã€‚peripheral(_:didUpdateValueFor:error:)value</p>

<p>å¹¶éæ‰€æœ‰ç‰¹å¾éƒ½å…·æœ‰å¯è¯»çš„å€¼ã€‚æ‚¨å¯ä»¥é€šè¿‡è®¿é—®æšä¸¾çš„ç›¸å…³å±æ€§æ¥ç¡®å®šç‰¹å¾å€¼æ˜¯å¦å¯è¯»ã€‚</p>

<p>å…·ä½“ä»£ç†æ–¹æ³•å®ç°å¦‚ä¸‹ï¼š
<strong>æ³¨æ„ï¼Œæ‰€æœ‰çš„ï¼Œä¸ç®¡æ˜¯ read , notify çš„ç‰¹å¾çš„å€¼éƒ½æ˜¯åœ¨è¿™é‡Œè¯»å–</strong></p>

<pre><code class="language-swift">   func peripheral(_ peripheral: CBPeripheral, didUpdateValueFor characteristic: CBCharacteristic, error: Error?)-&gt; (){
        if(error != nil){
            return
        }
        switch characteristic.uuid.uuidString {
        case &quot;***************&quot;:
            print(&quot;æ¥æ”¶åˆ°äº†è®¾å¤‡çš„æ¸©åº¦ç‰¹å¾çš„å€¼çš„å˜åŒ–&quot;)
        default:
            print(&quot;æ”¶åˆ°äº†å…¶ä»–æ•°æ®ç‰¹å¾æ•°æ®: \(characteristic.uuid.uuidString)&quot;)
        }
    }
</code></pre>

<p>######## 3-2 è®¢é˜…ç‰¹å¾å€¼
å°½ç®¡ä½¿ç”¨è¯¥readValueForCharacteristic:æ–¹æ³•è¯»å–ç‰¹å¾å€¼å¯¹äºé™æ€å€¼æ˜¯æœ‰æ•ˆçš„ï¼Œä½†å®ƒå¹¶ä¸æ˜¯æ£€ç´¢åŠ¨æ€å€¼çš„æœ€æœ‰æ•ˆæ–¹æ³•ã€‚è®¢é˜…éšæ—¶é—´å˜åŒ–çš„ç‰¹å¾å€¼ï¼Œä¾‹å¦‚æ‚¨çš„å¿ƒç‡ã€‚è®¢é˜…ç‰¹å¾å€¼æ—¶ï¼Œå½“å€¼æ›´æ”¹æ—¶ï¼Œæ‚¨ä¼šæ”¶åˆ°æ¥è‡ªå¤–å›´è®¾å¤‡çš„é€šçŸ¥ã€‚</p>

<p>é€šè¿‡è°ƒç”¨å¤–è®¾çš„setNotifyValue:forCharacteristic:æ–¹æ³•ï¼Œå°†ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šä¸ºtrueï¼Œå¯ä»¥è®¢é˜…æ‚¨æ„Ÿå…´è¶£çš„ç‰¹å¾çš„å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<pre><code class="language-swift">peripheral.setNotifyValue(true, for: characteristic)
</code></pre>

<p>å½“æ‚¨è®¢é˜…ï¼ˆæˆ–å–æ¶ˆè®¢é˜…ï¼‰ç‰¹å¾å€¼æ—¶ï¼Œå¤–å›´è®¾å¤‡å°†è°ƒç”¨peripheral:didUpdateNotificationStateForCharacteristic:error:å…¶å§”æ‰˜å¯¹è±¡çš„æ–¹æ³•ã€‚å¦‚æœè®¢é˜…è¯·æ±‚ç”±äºä»»ä½•åŸå› å¤±è´¥ï¼Œåˆ™å¯ä»¥å®ç°æ­¤å§”æ‰˜æ–¹æ³•ä»¥è®¿é—®é”™è¯¯åŸå› ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>

<pre><code class="language-swift">func peripheral(_ peripheral: CBPeripheral, didUpdateNotificationStateFor characteristic: CBCharacteristic, error: Error?) {
        // Deal with errors (if any)
        if let error = error {
            os_log(&quot;Error changing notification state: %s&quot;, error.localizedDescription)
            return
        }
        
        // Exit if it's not the transfer characteristic
        guard characteristic.uuid == TransferService.characteristicUUID else { return }
        
        if characteristic.isNotifying {
            // Notification has started
            os_log(&quot;Notification began on %@&quot;, characteristic)
        } else {
            // Notification has stopped, so disconnect from the peripheral
            os_log(&quot;Notification stopped on %@. Disconnecting&quot;, characteristic)
            cleanup()
        }
        
    }
</code></pre>

<blockquote>
<p>æ³¨æ„ï¼š å¹¶éæ‰€æœ‰ç‰¹å¾éƒ½æä¾›è®¢é˜…ã€‚æ‚¨å¯ä»¥é€šè¿‡æ£€æŸ¥ç‰¹å¾çš„propertieså±æ€§æ˜¯å¦åŒ…å«CBCharacteristicPropertyNotifyæˆ–CBCharacteristicPropertyIndicateå¸¸é‡æ¥ç¡®å®šç‰¹å¾æ˜¯å¦æä¾›è®¢é˜…ã€‚</p>
</blockquote>

<p>æˆåŠŸè®¢é˜…ç‰¹å¾å€¼åï¼Œå¤–å›´è®¾å¤‡åœ¨å€¼æ›´æ”¹åä¼šé€šçŸ¥æ‚¨çš„åº”ç”¨ã€‚æ¯æ¬¡æ›´æ”¹å€¼æ—¶ï¼Œå¤–å›´è®¾å¤‡éƒ½ä¼šè°ƒç”¨peripheral:didUpdateValueForCharacteristic:error:å…¶å§”æ‰˜å¯¹è±¡çš„æ–¹æ³•ã€‚è¦æ£€ç´¢æ›´æ–°åçš„å€¼ï¼Œå¯ä»¥é‡‡ç”¨ä¸ä¸Šè¿°è¯»å–ç‰¹æ€§å€¼ä¸­æ‰€è¿°ç›¸åŒçš„æ–¹æ³•æ¥å®ç°æ­¤æ–¹æ³•ã€‚</p>

<h4 id="4-å†™ç‰¹å¾å€¼">4 å†™ç‰¹å¾å€¼</h4>

<p>æœ‰æ—¶å†™ä¸€ä¸ªç‰¹å¾çš„å€¼å¾ˆæœ‰æ„ä¹‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºä¸è“ç‰™ä½åŠŸè€—æ•°å­—æ’æ¸©å™¨äº¤äº’ï¼Œåˆ™å¯èƒ½éœ€è¦ä¸ºæ’æ¸©å™¨æä¾›ä¸€ä¸ªè®¾ç½®æˆ¿é—´æ¸©åº¦çš„å€¼ã€‚å¦‚æœæŸä¸ªç‰¹å¾çš„å€¼æ˜¯å¯å†™çš„ï¼Œåˆ™å¯ä»¥NSDataé€šè¿‡è°ƒç”¨å¤–å›´è®¾å¤‡çš„writeValue:forCharacteristic:type:æ–¹æ³•å°†å…¶å€¼ä¸æ•°æ®ï¼ˆçš„ä¸€ä¸ªå®ä¾‹ï¼‰ä¸€èµ·å†™å…¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<p>å†™å…¥ç‰¹å¾å€¼æ—¶ï¼Œå¯ä»¥æŒ‡å®šè¦æ‰§è¡Œçš„å†™å…¥ç±»å‹ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå†™å…¥ç±»å‹å¯ä»¥ä¸ºCBCharacteristicWriteWithResponseï¼Œå®ƒæŒ‡ç¤ºå¤–å›´è®¾å¤‡é€šè¿‡è°ƒç”¨peripheral:didWriteValueForCharacteristic:error:å…¶ä»£ç†å¯¹è±¡çš„æ–¹æ³•æ¥è®©æ‚¨çš„åº”ç”¨çŸ¥é“å†™å…¥æ˜¯å¦æˆåŠŸã€‚æ‚¨å¯ä»¥å®ç°æ­¤ä»£ç†æ–¹æ³•æ¥å¤„ç†é”™è¯¯æƒ…å†µï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p>

<pre><code class="language-swift">//MARK: - æ£€æµ‹ä¸­å¿ƒå‘å¤–è®¾å†™æ•°æ®æ˜¯å¦æˆåŠŸ
    func peripheral(_ peripheral: CBPeripheral, didWriteValueFor characteristic: CBCharacteristic, error: Error?) {
        if(error != nil){
            print(&quot;å‘é€æ•°æ®å¤±è´¥!errorä¿¡æ¯:\(String(describing: error))&quot;)
        }
    }
</code></pre>

<p>ç›¸åï¼Œå¦‚æœæ‚¨å°†å†™å…¥ç±»å‹æŒ‡å®šä¸ºCBCharacteristicWriteWithoutResponseï¼Œåˆ™å†™å…¥æ“ä½œå°†å°½åŠ›è€Œä¸ºï¼Œå¹¶ä¸”ä¸èƒ½ä¿è¯ä¹Ÿä¸æŠ¥å‘Šä¼ é€ã€‚å¤–è®¾ä¸è°ƒç”¨ä»»ä½•ä»£ç†æ–¹æ³•ã€‚</p>

<blockquote>
<p>æ³¨æ„ï¼š ç‰¹å¾å¯èƒ½ä»…æ”¯æŒæŸäº›ç±»å‹çš„å†™å…¥ï¼Œæˆ–å®Œå…¨ä¸æ”¯æŒã€‚æ‚¨å¯ä»¥é€šè¿‡æ£€æŸ¥propertiesç‰¹å¾çš„å¸¸é‡CBCharacteristicPropertyWriteWithoutResponseæˆ–CBCharacteristicPropertyWriteå¸¸é‡ä¹‹ä¸€æ¥ç¡®å®šç‰¹å¾æ”¯æŒçš„å†™å…¥ç±»å‹ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚</p>
</blockquote>

    

    

    <h4>See also</h4>
    <ul>
        
            <li><a href="/2020/10/ios-core-bluetooth_3-%E7%94%A8%E4%BD%9C%E4%B8%AD%E5%A4%AE%E8%AE%BE%E5%A4%87%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%951/2/">iOS Core Bluetooth_3 ç”¨ä½œä¸­å¤®è®¾å¤‡çš„å¸¸ç”¨æ–¹æ³•ï¼ˆ1/2ï¼‰</a></li>
        
            <li><a href="/2020/10/ios-url-loading-system-%E7%AE%80%E4%BB%8B/">iOS URL Loading System ç®€ä»‹</a></li>
        
            <li><a href="/2020/10/ios-%E5%AE%9E%E4%B9%A0%E9%9D%A2%E8%AF%95%E5%B8%B8%E9%97%AE%E9%97%AE%E9%A2%98/">iOS å®ä¹ é¢è¯•å¸¸é—®é—®é¢˜</a></li>
        
            <li><a href="/2019/10/core-data%E5%9F%BA%E6%9C%AC%E7%AE%80%E4%BB%8B%E4%B8%80-data-model%E4%B8%8Ecore-data-stack/">Core DataåŸºæœ¬ç®€ä»‹ï¼ˆä¸€ï¼‰â€”â€” Data Modelä¸Core Data Stack</a></li>
        
            <li><a href="/2019/10/application-delegate%E5%92%8Cviewcontroller/">Application Delegateå’ŒViewController</a></li>
        
    </ul>


</article>



        </div>

        <aside class="col-12 col-lg-3 ml-auto blog-sidebar">
    
        


<section>
    <h4>Recent Posts</h4>
    <ol class="list-unstyled">
        
        <li>
            <a href="/2020/10/apple-developer-program-%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5%E4%BB%8B%E7%BB%8D/">Apple Developer Program ç›¸å…³æ¦‚å¿µä»‹ç»</a>
        </li>
        
        <li>
            <a href="/post/">Home</a>
        </li>
        
        <li>
            <a href="/2020/10/ios-core-bluetooth_3-%E7%94%A8%E4%BD%9C%E4%B8%AD%E5%A4%AE%E8%AE%BE%E5%A4%87%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%951/2/">iOS Core Bluetooth_3 ç”¨ä½œä¸­å¤®è®¾å¤‡çš„å¸¸ç”¨æ–¹æ³•ï¼ˆ1/2ï¼‰</a>
        </li>
        
        <li>
            <a href="/2020/10/ios-core-bluetooth_3-%E7%94%A8%E4%BD%9C%E4%B8%AD%E5%A4%AE%E8%AE%BE%E5%A4%87%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%952/2/">iOS Core Bluetooth_3 ç”¨ä½œä¸­å¤®è®¾å¤‡çš„å¸¸ç”¨æ–¹æ³•ï¼ˆ2/2ï¼‰</a>
        </li>
        
        <li>
            <a href="/2020/10/ios-url-loading-system-%E7%AE%80%E4%BB%8B/">iOS URL Loading System ç®€ä»‹</a>
        </li>
        
    </ol>
</section>

    
    
        <section>
    
        
        <h4>Categories</h4>
        <p>
            
            <a class="badge badge-primary" href="/categories/development">development</a>
            
        </p>
        
    
        
        <h4>Tags</h4>
        <p>
            
            <a class="badge badge-primary" href="/tags/apple-developer">apple-developer</a>
            
            <a class="badge badge-primary" href="/tags/bluetooth">bluetooth</a>
            
            <a class="badge badge-primary" href="/tags/core-data">core-data</a>
            
            <a class="badge badge-primary" href="/tags/core-graphics">core-graphics</a>
            
            <a class="badge badge-primary" href="/tags/flutter">flutter</a>
            
            <a class="badge badge-primary" href="/tags/http">http</a>
            
            <a class="badge badge-primary" href="/tags/ios">ios</a>
            
            <a class="badge badge-primary" href="/tags/iot">iot</a>
            
            <a class="badge badge-primary" href="/tags/loading">loading</a>
            
            <a class="badge badge-primary" href="/tags/mvc">mvc</a>
            
            <a class="badge badge-primary" href="/tags/nodemcu">nodemcu</a>
            
            <a class="badge badge-primary" href="/tags/storage">storage</a>
            
            <a class="badge badge-primary" href="/tags/tcp/ip">tcp/ip</a>
            
            <a class="badge badge-primary" href="/tags/uikit">uikit</a>
            
            <a class="badge badge-primary" href="/tags/vc">vc</a>
            
        </p>
        
    
</section>
    
</aside>

      </div>
    </div>
    

    
      







<footer class="blog-footer w-100">
    <nav class="navbar navbar-light bg-light">
        <p class="w-100 text-center">[ A student iOS developer in BUPT ğŸ‘¨ğŸ»â€ğŸ’» ]</p>
        <p class="w-100 text-center"><a href="#">Back to top</a></p>
    </nav>
</footer>

    

    
    
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  </body>
</html>
